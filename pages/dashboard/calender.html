<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HabitHub - Calendar View</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="../../assets/img/HabitHub-logo.png">
    <link rel="stylesheet" href="../../assets/css/calender.css">
</head>

<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <img src="../../assets/img/HabitHub-logo.png" alt="HabitHub Logo" class="logo-img"
                    style="height: 40px;">
                <h2>HabitHub</h2>
            </div>
            <div class="nav-links">
                <a href="dashboard.html">
                    <i class="fas fa-home"></i>
                    Dashboard
                </a>
                <a href="habits.html">
                    <i class="fas fa-list-check"></i>
                    Your Habits
                </a>
                <a href="calender.html" class="active">
                    <i class="fas fa-calendar-alt"></i>
                    Calendar View
                </a>
                <a href="analytics.html">
                    <i class="fas fa-chart-bar"></i>
                    Analytics
                </a>
                <a href="achievements.html">
                    <i class="fas fa-trophy"></i>
                    Achievements
                </a>
                <a href="profile.html">
                    <i class="fas fa-user"></i>
                    Profile
                </a>
                <a href="#" onclick="handleLogout(event)">
                    <i class="fas fa-sign-out-alt"></i>
                    Logout
                </a>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Mobile Menu Toggle -->
            <button class="mobile-menu-toggle" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </button>
            <!-- Header -->
            <div class="calendar-header">
                <div class="header-top">
                    <div class="greeting">
                        <h1 id="greeting">Calendar View</h1>
                        <div class="date" id="currentDate"></div>
                    </div>
                    <div class="calendar-controls">
                        <button class="nav-button" id="prevMonth">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <div class="month-year" id="monthYear"></div>
                        <button class="nav-button" id="nextMonth">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <button class="today-btn" id="todayBtn">Today</button>
                        <div class="view-toggle">
                            <button class="active" id="monthViewBtn">Month</button>
                            <button id="weekViewBtn">Week</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Loading State -->
            <div class="loading-state" id="loadingState" style="display: none;">
                <div class="loading-spinner"></div>
                <p>Loading calendar data...</p>
            </div>

            <!-- Calendar Layout -->
            <div class="calendar-layout" id="calendarLayout">
                <!-- Main Calendar -->
                <div class="calendar-main">
                    <!-- Month View -->
                    <div class="calendar-grid" id="calendarGrid">
                        <!-- Calendar will be generated by JavaScript -->
                    </div>
                    
                    <!-- Week View -->
                    <div class="week-view" id="weekView" style="display: none;">
                        <div class="week-header" id="weekHeader">
                            <!-- Week navigation will be generated -->
                        </div>
                        <div class="week-content" id="weekContent">
                            <!-- Week content will be generated -->
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="calendar-sidebar">
                    <!-- Habit Legend -->
                    <div class="habit-legend">
                        <h3>Your Habits</h3>
                        <div id="habitLegendList">
                            <!-- Dynamic habits will be loaded here -->
                        </div>
                    </div>

                    <!-- Monthly Stats -->
                    <div class="monthly-stats">
                        <h3 id="statsTitle">This Month</h3>
                        <div class="stat-item">
                            <span class="stat-label">Overall Progress</span>
                            <span class="stat-value" id="overallProgress">0%</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Perfect Days</span>
                            <span class="stat-value" id="perfectDays">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Current Streak</span>
                            <span class="stat-value" id="currentStreak">ðŸ”¥ 0 days</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Best Habit</span>
                            <span class="stat-value" id="bestHabit">None</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Days Active</span>
                            <span class="stat-value" id="daysActive">0/0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Day Detail Modal -->
    <div class="day-detail-modal" id="dayDetailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalDate">January 15, 2025</h3>
                <button class="close-modal" id="closeModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="modalHabits">
                    <!-- Habits for selected day will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Daily Note Modal -->
    <div class="daily-note-modal" id="dailyNoteModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="noteModalTitle">Your Notes!!</h3>
                <button class="close-modal" id="closeDailyNoteModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="note-form">
                    <label for="dailyNoteText">How was your day? Any thoughts or reflections?</label>
                    <textarea id="dailyNoteText" placeholder="Write about your day, challenges, victories, or any thoughts you'd like to remember..."></textarea>
                    <div class="note-actions">
                        <button class="btn-secondary" onclick="closeDailyNoteModal()">Cancel</button>
                        <button class="btn-primary" onclick="saveDailyNote()">
                            <i class="fas fa-save"></i>
                            Save Notes
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/dashboard.js"></script>
    <script src="../../assets/js/calender.js"></script>
</body>

</html>