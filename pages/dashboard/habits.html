<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HabitHub - Your Habits</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="icon" href="../../assets/img/HabitHub-logo.png">
  <link rel="stylesheet" href="../../assets/css/dashboard.css">
  <link rel="stylesheet" href="../../assets/css/habits.css">
</head>

<body>
  <div class="dashboard-container">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="logo">
        <img src="../../assets/img/HabitHub-logo.png" alt="HabitHub Logo" class="logo-img" style="height: 40px;">
        <h2>HabitHub</h2>
      </div>
      <div class="nav-links">
        <a href="dashboard.html">
          <i class="fas fa-home"></i>
          Dashboard
        </a>
        <a href="habits.html" class="active">
          <i class="fas fa-list-check"></i>
          Your Habits
        </a>
        <a href="#">
          <i class="fas fa-calendar-alt"></i>
          Calendar View
        </a>
        <a href="#">
          <i class="fas fa-chart-bar"></i>
          Analytics
        </a>
        <a href="#">
          <i class="fas fa-trophy"></i>
          Achievements
        </a>
        <a href="#">
          <i class="fas fa-users"></i>
          Challenges
        </a>
        <a href="#">
          <i class="fas fa-cog"></i>
          Settings
        </a>
        <a href="#" onclick="handleLogout(event)">
          <i class="fas fa-sign-out-alt"></i>
          Logout
        </a>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Mobile Menu Toggle -->
      <button class="mobile-menu-toggle" onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
      </button>
      
      <!-- Header -->
      <div class="dashboard-header">
        <div class="greeting-section">
          <h1 id="greeting">Loading...</h1>
          <div class="date" id="currentDate"></div>
        </div>
        <div class="header-icons">
          <i class="fas fa-bell" title="Notifications"></i>
          <div class="profile-icon" title="Profile">
            A
          </div>
        </div>
      </div>

      <!-- Habits Management Section -->
      <div class="habits-management-section">
        <div class="section-header">
          <h2>Manage Your Habits</h2>
          <button class="add-habit-btn" onclick="openAddHabitModal()">
            <i class="fas fa-plus"></i>
            Add New Habit
          </button>
        </div>

        <!-- Add Habit Modal -->
        <div class="modal fade" id="addHabitModal" tabindex="-1" aria-labelledby="addHabitModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="addHabitModalLabel">Add New Habit</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form id="addHabitForm">
                  <div class="mb-3">
                    <label for="habitName" class="form-label">Habit Name</label>
                    <input type="text" class="form-control" id="habitName" required
                      placeholder="Enter habit name (e.g., Reading, Exercise)">
                  </div>
                  <div class="mb-3">
                    <label for="habitCategory" class="form-label">Category</label>
                    <select class="form-select" id="habitCategory" required>
                      <option value="" disabled selected>Select a category</option>
                      <option value="health">ðŸŸ¢ Health</option>
                      <option value="physical">ðŸŸ  Physical Activities</option>
                      <option value="learning">ðŸ”µ Learning</option>
                      <option value="mindfulness">ðŸŸ£ Mindfulness</option>
                      <option value="creativity">ðŸ©· Creativity</option>
                      <option value="productivity">ðŸŸ¢ Productivity</option>
                      <option value="social">ðŸŸ  Social</option>
                      <option value="lifestyle">ðŸŸ¡ Lifestyle</option>
                    </select>
                  </div>
                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="addNewHabit()">Add Habit</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Edit Habit Modal -->
        <div class="modal fade" id="editHabitModal" tabindex="-1" aria-labelledby="editHabitModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="editHabitModalLabel">Edit Habit</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form id="editHabitForm">
                  <div class="mb-3">
                    <label for="editHabitName" class="form-label">Habit Name</label>
                    <input type="text" class="form-control" id="editHabitName" required
                      placeholder="Enter habit name (e.g., Reading, Exercise)">
                  </div>
                  <div class="mb-3">
                    <label for="editHabitCategory" class="form-label">Category</label>
                    <select class="form-select" id="editHabitCategory" required>
                      <option value="" disabled>Select a category</option>
                      <option value="health">ðŸŸ¢ Health</option>
                      <option value="physical">ðŸŸ  Physical Activities</option>
                      <option value="learning">ðŸ”µ Learning</option>
                      <option value="mindfulness">ðŸŸ£ Mindfulness</option>
                      <option value="creativity">ðŸ©· Creativity</option>
                      <option value="productivity">ðŸŸ¢ Productivity</option>
                      <option value="social">ðŸŸ  Social</option>
                      <option value="lifestyle">ðŸŸ¡ Lifestyle</option>
                    </select>
                  </div>
                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="confirmEditHabit()">Update Habit</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div class="modal fade" id="deleteHabitModal" tabindex="-1" aria-labelledby="deleteHabitModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="deleteHabitModalLabel">Delete Habit</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <p>Are you sure you want to delete this habit? This action cannot be undone.</p>
                <div class="habit-info">
                  <strong id="deleteHabitName"></strong>
                  <span id="deleteHabitCategory"></span>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" onclick="confirmDeleteHabit()">Delete Habit</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Habits Table (Desktop) -->
        <div class="habits-table-container">
          <div class="table-responsive">
            <table class="table habits-table" id="habitsTable">
              <thead>
                <tr>
                  <th>Habit</th>
                  <th>Category</th>
                  <th>Current Streak</th>
                  <th>Weekly Progress</th>
                  <th>Created Date</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="habitsTableBody">
                <!-- Dynamic habits will be rendered here -->
              </tbody>
            </table>
          </div>
          
          <!-- Mobile Cards View -->
          <div class="habits-mobile-cards" id="habitsMobileCards">
            <!-- Dynamic mobile cards will be rendered here -->
          </div>
          
          <!-- Empty State -->
          <div class="empty-state" id="emptyState" style="display: none;">
            <div class="empty-state-content">
              <i class="fas fa-list-check"></i>
              <h3>No Habits Yet</h3>
              <p>Start building better habits by adding your first habit!</p>
              <button class="add-habit-btn" onclick="openAddHabitModal()">
                <i class="fas fa-plus"></i>
                Add Your First Habit
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
  <script src="../../assets/js/dashboard.js"></script>
  <script src="../../assets/js/habits.js"></script>
</body>

</html>